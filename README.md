## 咸菜 Alpha Bot 

本指南适用于已构建完成的可执行程序（bin 目录中的应用），涵盖首次授权、更新授权、代理设置、多开规则、交易逻辑概览、日志查看与常见问题。

### 一、运行环境
- Windows 10/11（x64）或 macOS 12+（Apple/Intel）
- 稳定的网络连接（建议可访问 `binance.com` 与其 API 域名）

### 二、首次启动与授权
1. 双击运行程序。
2. 首屏会显示“授权门禁”：
   - 机器码：唯一且稳定，不会随重启变化。
   - 时间：用于校验授权有效期。
   - 输入框：粘贴您的 License。
3. 点击“授权/进入”。验证通过后进入主界面。


### 三、授权信息查看与更新
- 主界面左上角信息卡会显示授权日期、过期日期、剩余时间。
- 点击“更新授权”：
  1) 输入新授权码  2) 确认更新。
- 更新成功后，授权信息卡与剩余时间会实时刷新。

### 四、HTTP 代理设置（可选）
程序支持通过按钮设置 HTTP 代理：
1. 点击“设置代理”。
2. 在弹窗中输入代理地址（示例）：
   - `http://127.0.0.1:7890`
   - `socks5://127.0.0.1:1080`
3. 确认后程序会自动验证代理可用性：
   - 有效则全局启用并在日志中提示。
   - 无效则不会启用，并提示失败原因。

注意：代理为全局应用层代理；您可随时再次打开弹窗修改或清空以禁用。

### 五、多开与数据隔离
- 授权中 `meta.roleNum` 控制最大并发实例数。
- 超过并发上限时：会弹窗提示“已达到授权允许的最大并发数”，并退出当前启动。
- 数据隔离：
  - 每个实例使用独立的本地存储前缀，互不干扰。
  - 授权数据为所有实例共用。
- 异常退出或系统崩溃：程序会在下次启动时自动清理“陈旧锁”。Windows/macOS/Linux 均已适配进程检测。

### 六、交易模式与限价逻辑（概览）
- 默认限价模式（UI 中已隐藏“滑点/使用限价”开关）。
- OTO 订单：买单成交后会触发对应卖单。
- 触发价格偏移（必填）：范围 `[0.00001, 1]`，数值为“系数”，`1` 表示不偏移，卖单基于最新红色价计算。
- 监控与重试：
  - 对未成交的买/卖订单进行轮询；连续 5 次未成交则撤单并重下；卖单重下优先使用红色价。
  - 卖单单独重下时会重新计算并调整入参（数量、价格、精度约束）。
- 精度与金额：
  - 自动匹配交易对 `LOT_SIZE/PRICE_FILTER`，进行步长对齐。
  - 使用整数化运算计算 `exactAmount`，避免浮点误差导致校验失败。

提示：实际下单前请先在小额度环境测试，确认交易对参数与您的策略设置。

### 七、日志与排错
- 主界面“实时日志”显示关键步骤：下单、数量/价格调整、代理验证、授权状态等。
- 常见提示：
  - `workingPrice*workingQuantity must be the same as sum(paymentDetail.amount)`：请检查数量/价格精度；程序已内置整数化修正，若仍出现请减小金额或调整步长。
  - “启动按钮灰度”或“按钮无响应”：通常为必填项未通过校验（尤其是“触发价格偏移”）。
  - “授权失败：machine code mismatch/expired”：请核对机器码是否一致、授权是否在有效期内。

### 八、平台差异
- Windows：采用系统 API 判断进程存活；支持并发多开与陈旧锁清理。
- macOS/Linux：通过 `/proc` 或信号检测进程；同样支持并发多开。

### 九、更新与重新安装
- 如遇异常，可备份日志后重新下载应用并覆盖安装。
- 授权与实例并发限制会在应用启动时重新校验。

### 十、隐私与安全
- 机器码仅用于授权校验，不包含敏感隐私信息。
- 建议妥善保管授权码，不要在公共环境泄露。

——
如需技术支持，请提供：系统版本、是否使用代理、日志片段、交易对与复现步骤。


